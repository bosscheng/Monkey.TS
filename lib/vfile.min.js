var MF_EVENT;!function(t){var e=function(){function t(t,e){void 0===e&&(e=null),this.type=t,this.data=e}return t}();t.Event=e}(MF_EVENT||(MF_EVENT={}));var MF_EVENT;!function(t){var e=function(){function t(){this.eventLip={}}return t.prototype.onEvent=function(t,e){this.addEventListener(t,e)},t.prototype.moveEvent=function(t,e){this.removeEventListener(t,e)},t.prototype.addEventListener=function(t,e){this.eventLip[t]||(this.eventLip[t]=new Array),this.contains(t,e)||this.eventLip[t].push(e)},t.prototype.dispatchEvent=function(t){var e=this.eventLip[t.type];if(e)for(var n=0;n<e.length;n++){var i=e[n];t.target=this,i(t)}},t.prototype.contains=function(t,e){for(var n=0;n<this.eventLip[t].length;n++)if(this.eventLip[t][n]==e)return!0;return!1},t.prototype.removeEventListener=function(t,e){var n=this.eventLip[t];if(n)for(var i=0;i<n.length;i++)n[i]==e&&n.splice(i)},t}();t.EventDispatcher=e}(MF_EVENT||(MF_EVENT={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},EventDispatcher=MF_EVENT.EventDispatcher,MF_VFILE=function(t){function e(){var e=this;return t.call(this),window.hasOwnProperty("File")&&window.hasOwnProperty("FileReader")&&window.hasOwnProperty("FileList")&&window.hasOwnProperty("Blob")?(console.log("Great success! All the File APIs are supported."),this.input=document.createElement("input"),this.input.type="file",this.input.onchange=function(t){e.fileSelect(t)},this.file=new FileReader,void(this.file.onload=function(t){e.dispatchEvent(new MF_EVENT.Event("fileloaded",t.target.result))})):(console.log("The File APIs are not fully supported in this browser."),void alert("你使用的浏览器不支持文件本地上传。请更新你的浏览器"))}return __extends(e,t),e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.fileSelect=function(t){var e=(t.target||window.event.srcElement,this.input.files[0]);return e?(this.file.readAsDataURL(e),void console.log("载入VFILE资源")):(console.log("没有选择文件"),void this.dispatchEvent(new MF_EVENT.Event("error","null")))},e.prototype.loadFile=function(){if(document.all)this.input.click();else{var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0),this.input.dispatchEvent(t)}},e}(MF_EVENT.EventDispatcher);